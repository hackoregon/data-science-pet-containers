FROM amazonlinux:2-with-sources
LABEL maintainer="M. Edward (Ed) Borasky <znmeb@znmeb.net>"

RUN amazon-linux-extras install \
    postgresql9.6 \
    nano \
    vim \
  && yum install -y \
    awscli \
    curl \
    git \
    groff \
    lynx \
    postgresql \
    postgresql-contrib \
    postgresql-devel \
    postgresql-docs \
    postgresql-server \
    procps-ng \
    wget \
  && yum clean all \
  && rm -rf /var/cache/yum
USER postgres
RUN initdb -D /var/lib/pgsql/data/main
#CMD [ "pg_ctl", "-D", "/var/lib/pgsql/data/main", "start", "&&", "/usr/bin/sleep", "1001d" ]
CMD pg_ctl -D /var/lib/pgsql/data/main start; /usr/bin/sleep 1001d
